#include <Arduino.h>
#include "DRV8825.h"

// using a 200-step motor
#define MOTOR_STEPS 200

// set RPM
#define RPM 120

// configure the pins connected
#define DIR 16
#define STEP 17

// set microsteps to 1:full step, 2:half step...must match configuration set on physical pins M0, M1, and M2
#define MICROSTEPS 1

// make stepper motor object(?)
DRV8825 Track_Stepper(MOTOR_STEPS, DIR, STEP);

// LED on GPIO2
int ledPin = 23;

void setup() {
    // Set target motor RPM and microstepping
    Track_Stepper.begin(RPM, MICROSTEPS);
    // Set LED as output
    pinMode(ledPin, OUTPUT);
}

void loop() {
    // Tell motor to rotate 360 degrees. That's it.
    Track_Stepper.rotate(360);
    digitalWrite(ledPin, HIGH);
}
